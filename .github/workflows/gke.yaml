name: 'Integration'

on:
  push:
    branches:
      - 'main'
  pull_request:
    branches:
      - 'main'

# permissions:
#   contents: 'read'
#   id-token: 'write'

jobs:
  publish-images:
    runs-on: 'ubuntu-latest'
    steps:
      # - uses: 'actions/checkout@v4'

      # - uses: 'actions/setup-node@v4'
      #   with:
      #     node-version: '20.x'

      # - name: 'npm build'
      #   run: 'npm ci && npm run build'

      - uses: 'google-github-actions/auth@v2'
        with:
          credentials_json: '${{ secrets.GKE_KEY }}'

      # - name: 'get-gke-credentials'
      #   uses: './'
      #   with:
      #     project_id: 'porfolio-sbx'
      #     cluster_name: 'portfolio-sbx'
      #     location: 'us-central1'
      #     use_connect_gateway: 'true'
      #     namespace: 'default'

      - name: 'kubectl'
        run: |-
          kubectl get ns